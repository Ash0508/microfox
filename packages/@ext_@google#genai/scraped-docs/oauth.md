{
  "url": "https://ai.google.dev/gemini-api/docs/oauth",
  "content": "Skip to main content\nSign in\nModels\nMore\nGemini API docs\nAPI Reference\nCookbook\nCommunity\nSolutions\nMore\nCode assistance\nMore\nShowcase\nMore\nCommunity\nMore\nGet started\nOverview\nQuickstart\nAPI keys\nLibraries\nOpenAI compatibility\nModels\nAll models\nPricing\nRate limits\nBilling info\nModel Capabilities\nText generation\nImage generation\nVideo generation\nLong context\nStructured output\nThinking\nFunction calling\nDocument understanding\nImage understanding\nVideo understanding\nAudio understanding\nCode execution\nGrounding with Google Search\nGuides\nPrompt engineering\nLive API\nContext caching\nFiles API\nToken counting\nFine-tuning\nEmbeddings\nSafety\nResources\nMigrate to Gen AI SDK\nRelease notes\nAPI troubleshooting\nAI Studio\nCloud\nMigrate to Cloud\nOAuth authentication\nPolicies\nTerms of service\nAvailable regions\nAdditional usage polices\nIntroducing Gemini 2.5 Flash, Veo 2, and updates to the Live API Learn more\nHome\nGemini API\nModels\nSend feedback\nAuthentication with OAuth quickstart\nOn this page\nObjectives\nPrerequisites\nSet up your cloud project\n1. Enable the API\n2. Configure the OAuth consent screen\n3. Authorize credentials for a desktop application\nSet up Application Default Credentials\nCurl\n\nThe easiest way to authenticate to the Gemini API is to configure an API key, as described in the Gemini API quickstart. If you need stricter access controls, you can use OAuth instead. This guide will help you set up authentication with OAuth.\n\nThis guide uses a simplified authentication approach that is appropriate for a testing environment. For a production environment, learn about authentication and authorization before choosing the access credentials that are appropriate for your app.\n\nObjectives\nSet up your cloud project for OAuth\nSet up application-default-credentials\nManage credentials in your program instead of using gcloud auth\nPrerequisites\n\nTo run this quickstart, you need:\n\nA Google Cloud project\nA local installation of the gcloud CLI\nSet up your cloud project\n\nTo complete this quickstart, you first need to setup your Cloud project.\n\n1. Enable the API\n\nBefore using Google APIs, you need to turn them on in a Google Cloud project.\n\nIn the Google Cloud console, enable the Google Generative Language API.\n\n\nEnable the API\n\n2. Configure the OAuth consent screen\n\nNext configure the project's OAuth consent screen and add yourself as a test user. If you've already completed this step for your Cloud project, skip to the next section.\n\nIn the Google Cloud console, go to Menu > Google Auth platform > Overview.\n\nGo to the Google Auth platform\n\nComplete the project configuration form and set the user type to External in the Audience section.\n\nComplete the rest of the form, accept the User Data Policy terms, and then click Create.\n\nFor now, you can skip adding scopes and click Save and Continue. In the future, when you create an app for use outside of your Google Workspace organization, you must add and verify the authorization scopes that your app requires.\n\nAdd test users:\n\nNavigate to the Audience page of the Google Auth platform.\nUnder Test users, click Add users.\nEnter your email address and any other authorized test users, then click Save.\n3. Authorize credentials for a desktop application\n\nTo authenticate as an end user and access user data in your app, you need to create one or more OAuth 2.0 Client IDs. A client ID is used to identify a single app to Google's OAuth servers. If your app runs on multiple platforms, you must create a separate client ID for each platform.\n\nIn the Google Cloud console, go to Menu > Google Auth platform > Clients.\n\nGo to Credentials\n\nClick Create Client.\n\nClick Application type > Desktop app.\n\nIn the Name field, type a name for the credential. This name is only shown in the Google Cloud console.\n\nClick Create. The OAuth client created screen appears, showing your new Client ID and Client secret.\n\nClick OK. The newly created credential appears under OAuth 2.0 Client IDs.\n\nClick the download button to save the JSON file. It will be saved as client_secret_<identifier>.json, and rename it to client_secret.json and move it to your working directory.\n\nSet up Application Default Credentials\n\nTo convert the client_secret.json file into usable credentials, pass its location the gcloud auth application-default login command's --client-id-file argument.\n\ngcloud auth application-default login \\\n    --client-id-file=client_secret.json \\\n    --scopes='https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/generative-language.retriever'\n\nThe simplified project setup in this tutorial triggers a \"Google hasn't verified this app.\" dialog. This is normal, choose \"continue\".\n\nThis places the resulting token in a well known location so it can be accessed by gcloud or the client libraries.\n\nNote: If running on Colab include --no-browser and carefully follow the instructions it prints (don't just click the link). Also make sure your local gcloud --version is the latest to match Colab.\n\ngcloud auth application-default login \n\n    --no-browser\n    --client-id-file=client_secret.json \n\n    --scopes='https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/generative-language.retriever'\n\n\nOnce you have the Application Default Credentials (ADC) set, the client libraries in most languages need minimal to no help to find them.\n\nCurl\n\nThe quickest way to test that this is working is to use it to access the REST API using curl:\n\naccess_token=$(gcloud auth application-default print-access-token)\nproject_id=<MY PROJECT ID>\ncurl -X GET https://generativelanguage.googleapis.com/v1/models \\\n    -H 'Content-Type: application/json' \\\n    -H \"Authorization: Bearer ${access_token}\" \\\n    -H \"x-goog-user-project: ${project_id}\" | grep '\"name\"'\nPython\n\nIn python the client libraries should find them automatically:\n\npip install google-generativeai\n\n\nA minimal script to test it might be:\n\nimport google.generativeai as genai\n\nprint('Available base models:', [m.name for m in genai.list_models()])\n\nNext steps\n\nIf that's working you're ready to try Semantic retrieval on your text data.\n\nManage credentials yourself [Python]\n\nIn many cases you won't have the gcloud command available to create the access token from the Client ID (client_secret.json). Google provides libraries in many languages to let you manage that process within your app. This section demonstrates the process, in python. There are equivalent examples of this sort of procedure, for other languages, available in the Drive API documentation\n\n1. Install the necessary libraries\n\nInstall the Google client library for Python, and the Gemini client library.\n\npip install --upgrade -q google-api-python-client google-auth-httplib2 google-auth-oauthlib\npip install google-generativeai\n2. Write the credential manager\n\nTo minimize the number of times you have to click through the authorization screens, create a file called load_creds.py in your working directory to caches a token.json file that it can reuse later, or refresh if it expires.\n\nStart with the following code to convert the client_secret.json file to a token usable with genai.configure:\n\nimport os.path\n\nfrom google.auth.transport.requests import Request\nfrom google.oauth2.credentials import Credentials\nfrom google_auth_oauthlib.flow import InstalledAppFlow\n\nSCOPES = ['https://www.googleapis.com/auth/generative-language.retriever']\n\ndef load_creds():\n    \"\"\"Converts `client_secret.json` to a credential object.\n\n    This function caches the generated tokens to minimize the use of the\n    consent screen.\n    \"\"\"\n    creds = None\n    # The file token.json stores the user's access and refresh tokens, and is\n    # created automatically when the authorization flow completes for the first\n    # time.\n    if os.path.exists('token.json'):\n        creds = Credentials.from_authorized_user_file('token.json', SCOPES)\n    # If there are no (valid) credentials available, let the user log in.\n    if not creds or not creds.valid:\n        if creds and creds.expired and creds.refresh_token:\n            creds.refresh(Request())\n        else:\n            flow = InstalledAppFlow.from_client_secrets_file(\n                'client_secret.json', SCOPES)\n            creds = flow.run_local_server(port=0)\n        # Save the credentials for the next run\n        with open('token.json', 'w') as token:\n            token.write(creds.to_json())\n    return creds\n\n3. Write your program\n\nNow create your script.py:\n\nimport pprint\nimport google.generativeai as genai\nfrom load_creds import load_creds\n\ncreds = load_creds()\n\ngenai.configure(credentials=creds)\n\nprint()\nprint('Available base models:', [m.name for m in genai.list_models()])\n\n4. Run your program\n\nIn your working directory, run the sample:\n\npython script.py\n\nThe first time you run the script, it opens a browser window and prompts you to authorize access.\n\nIf you're not already signed in to your Google Account, you're prompted to sign in. If you're signed in to multiple accounts, be sure to select the account you set as a \"Test Account\" when configuring your project.\n\nNote: The simplified project setup in this tutorial triggers a \"Google hasn't verified this app.\" dialog. This is normal, choose \"continue\".\n\nAuthorization information is stored in the file system, so the next time you run the sample code, you aren't prompted for authorization.\n\nYou have successfully setup authentication.\n\nSend feedback\n\nExcept as otherwise noted, the content of this page is licensed under the Creative Commons Attribution 4.0 License, and code samples are licensed under the Apache 2.0 License. For details, see the Google Developers Site Policies. Java is a registered trademark of Oracle and/or its affiliates.\n\nLast updated 2025-05-12 UTC.\n\nTerms\nPrivacy",
  "updatedAt": "2025-05-13T03:20:45.911Z"
}