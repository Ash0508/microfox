{
  "url": "https://ai.google.dev/gemini-api/docs/code-execution",
  "content": "Skip to main content\nSign in\nModels\nMore\nGemini API docs\nAPI Reference\nCookbook\nCommunity\nSolutions\nMore\nCode assistance\nMore\nShowcase\nMore\nCommunity\nMore\nGet started\nOverview\nQuickstart\nAPI keys\nLibraries\nOpenAI compatibility\nModels\nAll models\nPricing\nRate limits\nBilling info\nModel Capabilities\nText generation\nImage generation\nVideo generation\nLong context\nStructured output\nThinking\nFunction calling\nDocument understanding\nImage understanding\nVideo understanding\nAudio understanding\nCode execution\nGrounding with Google Search\nGuides\nPrompt engineering\nLive API\nContext caching\nFiles API\nToken counting\nFine-tuning\nEmbeddings\nSafety\nResources\nMigrate to Gen AI SDK\nRelease notes\nAPI troubleshooting\nAI Studio\nCloud\nPolicies\nTerms of service\nAvailable regions\nAdditional usage polices\nIntroducing Gemini 2.5 Flash, Veo 2, and updates to the Live API Learn more\nHome\nGemini API\nModels\nSend feedback\nCode execution\nOn this page\nEnable code execution\nUse code execution in chat\nInput/output (I/O)\nI/O pricing\nI/O details\nBilling\nLimitations\nSupported libraries\n\nThe Gemini API provides a code execution tool that enables the model to generate and run Python code. The model can then learn iteratively from the code execution results until it arrives at a final output. You can use code execution to build applications that benefit from code-based reasoning. For example, you can use code execution to solve equations or process text. You can also use the libraries included in the code execution environment to perform more specialized tasks.\n\nGemini is only able to execute code in Python. You can still ask Gemini to generate code in another language, but the model can't use the code execution tool to run it.\n\nEnable code execution\n\nTo enable code execution, configure the code execution tool on the model. This allows the model to generate and run code.\n\nPython\nJavaScript\nGo\nREST\nfrom google import genai\nfrom google.genai import types\n\nclient = genai.Client()\n\nresponse = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=\"What is the sum of the first 50 prime numbers? \"\n    \"Generate and run code for the calculation, and make sure you get all 50.\",\n    config=types.GenerateContentConfig(\n        tools=[types.Tool(code_execution=types.ToolCodeExecution)]\n    ),\n)\n\nfor part in response.candidates[0].content.parts:\n    if part.text is not None:\n        print(part.text)\n    if part.executable_code is not None:\n        print(part.executable_code.code)\n    if part.code_execution_result is not None:\n        print(part.code_execution_result.output)\n\n\nThe output might look something like the following, which has been formatted for readability:\n\nOkay, I need to calculate the sum of the first 50 prime numbers. Here's how I'll\napproach this:\n\n1.  **Generate Prime Numbers:** I'll use an iterative method to find prime\n    numbers. I'll start with 2 and check if each subsequent number is divisible\n    by any number between 2 and its square root. If not, it's a prime.\n2.  **Store Primes:** I'll store the prime numbers in a list until I have 50 of\n    them.\n3.  **Calculate the Sum:**  Finally, I'll sum the prime numbers in the list.\n\nHere's the Python code to do this:\n\ndef is_prime(n):\n  \"\"\"Efficiently checks if a number is prime.\"\"\"\n  if n <= 1:\n    return False\n  if n <= 3:\n    return True\n  if n % 2 == 0 or n % 3 == 0:\n    return False\n  i = 5\n  while i * i <= n:\n    if n % i == 0 or n % (i + 2) == 0:\n      return False\n    i += 6\n  return True\n\nprimes = []\nnum = 2\nwhile len(primes) < 50:\n  if is_prime(num):\n    primes.append(num)\n  num += 1\n\nsum_of_primes = sum(primes)\nprint(f'{primes=}')\nprint(f'{sum_of_primes=}')\n\nprimes=[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67,\n71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151,\n157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229]\nsum_of_primes=5117\n\nThe sum of the first 50 prime numbers is 5117.\n\n\nThis output combines several content parts that the model returns when using code execution:\n\ntext: Inline text generated by the model\nexecutableCode: Code generated by the model that is meant to be executed\ncodeExecutionResult: Result of the executable code\n\nThe naming conventions for these parts vary by programming language.\n\nUse code execution in chat\n\nYou can also use code execution as part of a chat.\n\nPython\nJavaScript\nGo\nREST\nfrom google import genai\nfrom google.genai import types\n\nclient = genai.Client()\n\nchat = client.chats.create(\n    model=\"gemini-2.0-flash\",\n    config=types.GenerateContentConfig(\n        tools=[types.Tool(code_execution=types.ToolCodeExecution)]\n    ),\n)\n\nresponse = chat.send_message(\"I have a math question for you.\")\nprint(response.text)\n\nresponse = chat.send_message(\n    \"What is the sum of the first 50 prime numbers? \"\n    \"Generate and run code for the calculation, and make sure you get all 50.\"\n)\n\nfor part in response.candidates[0].content.parts:\n    if part.text is not None:\n        print(part.text)\n    if part.executable_code is not None:\n        print(part.executable_code.code)\n    if part.code_execution_result is not None:\n        print(part.code_execution_result.output)\n\nInput/output (I/O)\n\nStarting with Gemini 2.0 Flash, code execution supports file input and graph output. Using these input and output capabilities, you can upload CSV and text files, ask questions about the files, and have Matplotlib graphs generated as part of the response. The output files are returned as inline images in the response.\n\nI/O pricing\n\nWhen using code execution I/O, you're charged for input tokens and output tokens:\n\nInput tokens:\n\nUser prompt\n\nOutput tokens:\n\nCode generated by the model\nCode execution output in the code environment\nSummary generated by the model\nI/O details\n\nWhen you're working with code execution I/O, be aware of the following technical details:\n\nThe maximum runtime of the code environment is 30 seconds.\nIf the code environment generates an error, the model may decide to regenerate the code output. This can happen up to 5 times.\nThe maximum file input size is limited by the model token window. In AI Studio, using Gemini Flash 2.0, the maximum input file size is 1 million tokens (roughly 2MB for text files of the supported input types). If you upload a file that's too large, AI Studio won't let you send it.\nCode execution works best with text and CSV files.\nThe input file can be passed in part.inlineData or part.fileData (uploaded via the Files API), and the output file is always returned as part.inlineData.\n\tSingle turn\tBidirectional (Multimodal Live API)\nModels supported\tAll Gemini 2.0 models\tOnly Flash experimental models\nFile input types supported\t.png, .jpeg, .csv, .xml, .cpp, .java, .py, .js, .ts\t.png, .jpeg, .csv, .xml, .cpp, .java, .py, .js, .ts\nPlotting libraries supported\tMatplotlib\tMatplotlib\nMulti-tool use\tNo\tYes\nBilling\n\nThere's no additional charge for enabling code execution from the Gemini API. You'll be billed at the current rate of input and output tokens based on the Gemini model you're using.\n\nHere are a few other things to know about billing for code execution:\n\nYou're only billed once for the input tokens you pass to the model, and you're billed for the final output tokens returned to you by the model.\nTokens representing generated code are counted as output tokens. Generated code can include text and multimodal output like images.\nCode execution results are also counted as output tokens.\n\nThe billing model is shown in the following diagram:\n\nYou're billed at the current rate of input and output tokens based on the Gemini model you're using.\nIf Gemini uses code execution when generating your response, the original prompt, the generated code, and the result of the executed code are labeled intermediate tokens and are billed as input tokens.\nGemini then generates a summary and returns the generated code, the result of the executed code, and the final summary. These are billed as output tokens.\nThe Gemini API includes an intermediate token count in the API response, so you know why you're getting additional input tokens beyond your initial prompt.\nLimitations\nThe model can only generate and execute code. It can't return other artifacts like media files.\nIn some cases, enabling code execution can lead to regressions in other areas of model output (for example, writing a story).\nThere is some variation in the ability of the different models to use code execution successfully.\nSupported libraries\n\nThe code execution environment includes the following libraries:\n\nattrs\nchess\ncontourpy\nfpdf\ngeopandas\nimageio\njinja2\njoblib\njsonschema\njsonschema-specifications\nlxml\nmatplotlib\nmpmath\nnumpy\nopencv-python\nopenpyxl\npackaging\npandas\npillow\nprotobuf\npylatex\npyparsing\nPyPDF2\npython-dateutil\npython-docx\npython-pptx\nreportlab\nscikit-learn\nscipy\nseaborn\nsix\nstriprtf\nsympy\ntabulate\ntensorflow\ntoolz\nxlrd\n\nYou can't install your own libraries.\n\nNote: Only matplotlib is supported for graph rendering using code execution.\nWhat's next\nTry the code execution Colab.\nLearn about other Gemini API tools:\nFunction calling\nGrounding with Google Search\nSend feedback\n\nExcept as otherwise noted, the content of this page is licensed under the Creative Commons Attribution 4.0 License, and code samples are licensed under the Apache 2.0 License. For details, see the Google Developers Site Policies. Java is a registered trademark of Oracle and/or its affiliates.\n\nLast updated 2025-05-12 UTC.\n\nTerms\nPrivacy",
  "updatedAt": "2025-05-13T03:16:54.543Z"
}